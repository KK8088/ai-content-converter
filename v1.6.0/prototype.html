<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIå†…å®¹æ ¼å¼è½¬æ¢å·¥å…· v1.6.0 åŸå‹</title>
    
    <!-- Fluid Design 2025 æ ·å¼ -->
    <link rel="stylesheet" href="css/fluid-design.css">
    
    <!-- åŒæ¨¡å¼UIæ ·å¼ -->
    <style>
        /* åŒæ¨¡å¼UIä¸“ç”¨æ ·å¼ */
        .app-layout {
            min-height: 100vh;
            display: grid;
            grid-template-rows: auto 1fr auto;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .app-header {
            padding: var(--space-xl) 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-lg);
        }

        .brand {
            flex: 1;
        }

        .app-title {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-sm);
        }

        .version-info {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .version-badge {
            padding: var(--space-sm) var(--space-md);
            background: var(--primary-gradient);
            color: white;
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
        }

        .mode-indicator {
            padding: var(--space-sm) var(--space-md);
            background: var(--glass-bg);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
        }

        .mode-indicator[data-mode="simple"] {
            color: var(--success-solid);
            border-color: var(--success-solid);
        }

        .mode-indicator[data-mode="advanced"] {
            color: var(--primary-solid);
            border-color: var(--primary-solid);
        }

        .app-main {
            padding: var(--space-2xl) 0;
        }

        .input-section {
            margin-bottom: var(--space-xl);
        }

        .input-header {
            margin-bottom: var(--space-lg);
            text-align: center;
        }

        .smart-input-wrapper {
            position: relative;
        }

        .input-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--space-md);
            padding: 0 var(--space-md);
        }

        .format-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .indicator-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-muted);
            transition: all var(--transition-normal);
        }

        .indicator-dot.analyzing {
            background: var(--warning-solid);
            animation: pulse 1.5s infinite;
        }

        .indicator-dot.ready {
            background: var(--success-solid);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .action-section {
            text-align: center;
            margin-bottom: var(--space-xl);
        }

        .action-buttons {
            margin-bottom: var(--space-lg);
        }

        .gap-md {
            gap: var(--space-md);
        }

        .mode-switch-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            text-decoration: underline;
            transition: color var(--transition-normal);
        }

        .mode-switch-btn:hover {
            color: var(--primary-solid);
        }

        .suggestion-section {
            margin-bottom: var(--space-xl);
        }

        .suggestion-card {
            background: var(--success-gradient);
            color: white;
            border: none;
        }

        .advanced-panel {
            transition: all var(--transition-normal);
        }

        .panel-header {
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-md);
            border-bottom: 1px solid var(--border-light);
        }

        .option-group {
            margin-bottom: var(--space-lg);
        }

        .option-label {
            display: block;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .format-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-md);
        }

        .format-option {
            position: relative;
            cursor: pointer;
        }

        .format-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .option-content {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: var(--glass-bg);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
        }

        .format-option input:checked + .option-content {
            border-color: var(--primary-solid);
            background: rgba(99, 102, 241, 0.1);
        }

        .option-icon {
            font-size: var(--text-lg);
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
        }

        .checkbox-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--primary-solid);
        }

        .app-footer {
            padding: var(--space-lg) 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* åŠ¨ç”»æ•ˆæœ */
        .animate-slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* æ¶ˆæ¯æç¤ºæ ·å¼ */
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            color: white;
            font-weight: var(--font-medium);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .message-success {
            background: var(--success-gradient);
        }

        .message-warning {
            background: var(--warning-gradient);
        }

        .message-error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .message-info {
            background: var(--primary-gradient);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .action-buttons {
                flex-direction: column;
                align-items: stretch;
            }

            .format-options {
                grid-template-columns: 1fr;
            }

            .status-bar {
                flex-direction: column;
                gap: var(--space-sm);
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- åŒæ¨¡å¼UIå°†åœ¨è¿™é‡Œæ¸²æŸ“ -->
    </div>

    <!-- åŠ è½½è„šæœ¬ -->
    <script src="js/ai/ContentAnalyzer.js"></script>
    <script src="js/components/DualMode.js"></script>
    
    <script>
        // åˆå§‹åŒ–åº”ç”¨
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ AIå†…å®¹æ ¼å¼è½¬æ¢å·¥å…· v1.6.0 åŸå‹å¯åŠ¨');
            
            // åˆ›å»ºåŒæ¨¡å¼æ§åˆ¶å™¨
            const dualMode = new DualModeController();
            
            // åˆ›å»ºå†…å®¹åˆ†æå™¨
            const analyzer = new ContentAnalyzer();
            
            // ç›‘å¬æ¨¡å¼åˆ‡æ¢
            dualMode.on('onModeChange', (mode) => {
                console.log('æ¨¡å¼åˆ‡æ¢:', mode);
                
                // æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢æ¶ˆæ¯
                const message = mode === 'simple' ? 'å·²åˆ‡æ¢åˆ°ç®€å•æ¨¡å¼' : 'å·²åˆ‡æ¢åˆ°é«˜çº§æ¨¡å¼';
                showMessage(message, 'info');
            });
            
            // ç›‘å¬è½¬æ¢äº‹ä»¶
            dualMode.on('onConvert', async (data) => {
                console.log('å¼€å§‹è½¬æ¢:', data);
                
                try {
                    // åˆ†æå†…å®¹
                    const analysis = await analyzer.analyze(data.content);
                    console.log('å†…å®¹åˆ†æç»“æœ:', analysis);
                    
                    // æ¨¡æ‹Ÿè½¬æ¢è¿‡ç¨‹
                    await simulateConversion(data, analysis);
                    
                } catch (error) {
                    console.error('è½¬æ¢å¤±è´¥:', error);
                    showMessage('è½¬æ¢å¤±è´¥ï¼Œè¯·é‡è¯•', 'error');
                }
            });
            
            // æ¨¡æ‹Ÿè½¬æ¢è¿‡ç¨‹
            async function simulateConversion(data, analysis) {
                const format = analysis.recommendation.format;
                const formatName = getFormatDisplayName(format);
                
                // æ˜¾ç¤ºå¼€å§‹æ¶ˆæ¯
                showMessage(`å¼€å§‹ç”Ÿæˆ${formatName}...`, 'info');
                
                // æ¨¡æ‹Ÿè½¬æ¢æ—¶é—´
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // æ˜¾ç¤ºå®Œæˆæ¶ˆæ¯
                showMessage(`${formatName}ç”Ÿæˆå®Œæˆï¼`, 'success');
                
                // æ¨¡æ‹Ÿæ–‡ä»¶ä¸‹è½½
                downloadSimulatedFile(format);
            }
            
            // æ¨¡æ‹Ÿæ–‡ä»¶ä¸‹è½½
            function downloadSimulatedFile(format) {
                const filename = `AIè½¬æ¢æ–‡æ¡£_${new Date().toISOString().slice(0, 10)}.${format}`;
                console.log('æ¨¡æ‹Ÿä¸‹è½½æ–‡ä»¶:', filename);
                
                // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿™é‡Œä¼šè§¦å‘çœŸå®çš„æ–‡ä»¶ä¸‹è½½
                setTimeout(() => {
                    showMessage('æ–‡ä»¶ä¸‹è½½å·²å¼€å§‹', 'success');
                }, 500);
            }
            
            // è·å–æ ¼å¼æ˜¾ç¤ºåç§°
            function getFormatDisplayName(format) {
                const names = {
                    'docx': 'Wordæ–‡æ¡£',
                    'xlsx': 'Excelè¡¨æ ¼',
                    'pdf': 'PDFæ–‡æ¡£'
                };
                return names[format] || format.toUpperCase();
            }
            
            // æ˜¾ç¤ºæ¶ˆæ¯
            function showMessage(message, type = 'info') {
                const messageEl = document.createElement('div');
                messageEl.className = `message message-${type}`;
                messageEl.textContent = message;
                
                document.body.appendChild(messageEl);
                
                setTimeout(() => {
                    messageEl.remove();
                }, 3000);
            }
            
            // æ·»åŠ ä¸€äº›æµ‹è¯•æ•°æ®
            window.testData = {
                conversation: `ç”¨æˆ·ï¼šè¯·å¸®æˆ‘åˆ†æä¸€ä¸‹è¿™ä¸ªæ•°æ®è¡¨æ ¼
                
| äº§å“åç§° | é”€é‡ | ä»·æ ¼ |
|---------|------|------|
| äº§å“A   | 100  | 50   |
| äº§å“B   | 200  | 80   |
| äº§å“C   | 150  | 60   |

åŠ©æ‰‹ï¼šå¥½çš„ï¼Œæˆ‘æ¥ä¸ºæ‚¨åˆ†æè¿™ä¸ªé”€å”®æ•°æ®è¡¨æ ¼...`,
                
                document: `# AIå†…å®¹æ ¼å¼è½¬æ¢å·¥å…·ä½¿ç”¨æŒ‡å—

## ç®€ä»‹
è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„AIå†…å®¹æ ¼å¼è½¬æ¢å·¥å…·ï¼Œæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ã€‚

## ä¸»è¦åŠŸèƒ½
- Wordæ–‡æ¡£ç”Ÿæˆ
- Excelè¡¨æ ¼ç”Ÿæˆ  
- PDFæ–‡æ¡£ç”Ÿæˆ

## ä½¿ç”¨æ–¹æ³•
1. ç²˜è´´å†…å®¹
2. é€‰æ‹©æ ¼å¼
3. å¼€å§‹è½¬æ¢`,
                
                code: `\`\`\`javascript
function convertContent(content, format) {
    const analyzer = new ContentAnalyzer();
    const result = analyzer.analyze(content);
    return generateFile(result, format);
}
\`\`\``
            };
            
            console.log('æµ‹è¯•æ•°æ®å·²å‡†å¤‡ï¼Œå¯åœ¨æ§åˆ¶å°ä½¿ç”¨ testData è®¿é—®');
            console.log('åŸå‹åˆå§‹åŒ–å®Œæˆï¼');
        });
    </script>
</body>
</html>
