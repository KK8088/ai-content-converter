<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIÂÜÖÂÆπÊ†ºÂºèËΩ¨Êç¢Â∑•ÂÖ∑ v1.6.0 ÂéüÂûã</title>
    
    <!-- Fluid Design 2025 Ê†∑Âºè -->
    <link rel="stylesheet" href="css/fluid-design.css">
    
    <!-- ÂèåÊ®°ÂºèUIÊ†∑Âºè -->
    <style>
        /* ÂèåÊ®°ÂºèUI‰∏ìÁî®Ê†∑Âºè */
        .app-layout {
            min-height: 100vh;
            display: grid;
            grid-template-rows: auto 1fr auto;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
        }

        .app-header {
            padding: var(--space-xl) 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-lg);
        }

        .brand {
            flex: 1;
        }

        .app-title {
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--space-sm);
        }

        .version-info {
            display: flex;
            align-items: center;
            gap: var(--space-md);
        }

        .version-badge {
            padding: var(--space-sm) var(--space-md);
            background: var(--primary-gradient);
            color: white;
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: var(--font-semibold);
        }

        .mode-indicator {
            padding: var(--space-sm) var(--space-md);
            background: var(--glass-bg);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-full);
            font-size: var(--text-sm);
            font-weight: var(--font-medium);
        }

        .mode-indicator[data-mode="simple"] {
            color: var(--success-solid);
            border-color: var(--success-solid);
        }

        .mode-indicator[data-mode="advanced"] {
            color: var(--primary-solid);
            border-color: var(--primary-solid);
        }

        .app-main {
            padding: var(--space-2xl) 0;
        }

        .input-section {
            margin-bottom: var(--space-xl);
        }

        .input-header {
            margin-bottom: var(--space-lg);
            text-align: center;
        }

        .smart-input-wrapper {
            position: relative;
        }

        .input-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: var(--space-md);
            padding: 0 var(--space-md);
        }

        .format-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
        }

        .indicator-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--text-muted);
            transition: all var(--transition-normal);
        }

        .indicator-dot.analyzing {
            background: var(--warning-solid);
            animation: pulse 1.5s infinite;
        }

        .indicator-dot.ready {
            background: var(--success-solid);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .action-section {
            text-align: center;
            margin-bottom: var(--space-xl);
        }

        .action-buttons {
            margin-bottom: var(--space-lg);
        }

        .gap-md {
            gap: var(--space-md);
        }

        .mode-switch-btn {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            text-decoration: underline;
            transition: color var(--transition-normal);
        }

        .mode-switch-btn:hover {
            color: var(--primary-solid);
        }

        .suggestion-section {
            margin-bottom: var(--space-xl);
        }

        .suggestion-card {
            background: var(--success-gradient);
            color: white;
            border: none;
        }

        .advanced-panel {
            transition: all var(--transition-normal);
        }

        .panel-header {
            margin-bottom: var(--space-lg);
            padding-bottom: var(--space-md);
            border-bottom: 1px solid var(--border-light);
        }

        .option-group {
            margin-bottom: var(--space-lg);
        }

        .option-label {
            display: block;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
        }

        .format-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: var(--space-md);
        }

        .format-option {
            position: relative;
            cursor: pointer;
        }

        .format-option input[type="radio"] {
            position: absolute;
            opacity: 0;
            pointer-events: none;
        }

        .option-content {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            padding: var(--space-md);
            background: var(--glass-bg);
            border: 2px solid var(--border-light);
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
        }

        .format-option input:checked + .option-content {
            border-color: var(--primary-solid);
            background: rgba(99, 102, 241, 0.1);
        }

        .option-icon {
            font-size: var(--text-lg);
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            cursor: pointer;
        }

        .checkbox-option input[type="checkbox"] {
            width: 16px;
            height: 16px;
            accent-color: var(--primary-solid);
        }

        .app-footer {
            padding: var(--space-lg) 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--glass-border);
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* Âä®ÁîªÊïàÊûú */
        .animate-slide-up {
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Ê∂àÊÅØÊèêÁ§∫Ê†∑Âºè */
        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: var(--space-md) var(--space-lg);
            border-radius: var(--radius-md);
            color: white;
            font-weight: var(--font-medium);
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .message-success {
            background: var(--success-gradient);
        }

        .message-warning {
            background: var(--warning-gradient);
        }

        .message-error {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        .message-info {
            background: var(--primary-gradient);
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .action-buttons {
                flex-direction: column;
                align-items: stretch;
            }

            .format-options {
                grid-template-columns: 1fr;
            }

            .status-bar {
                flex-direction: column;
                gap: var(--space-sm);
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- ÂèåÊ®°ÂºèUIÂ∞ÜÂú®ËøôÈáåÊ∏≤Êüì -->
    </div>

    <!-- Âä†ËΩΩËÑöÊú¨ -->
    <script src="js/ai/ContentAnalyzer.js"></script>
    <script src="js/components/DualMode.js"></script>
    
    <script>
        // ÂàùÂßãÂåñÂ∫îÁî®
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ AIÂÜÖÂÆπÊ†ºÂºèËΩ¨Êç¢Â∑•ÂÖ∑ v1.6.0 ÂéüÂûãÂêØÂä®');
            
            // ÂàõÂª∫ÂèåÊ®°ÂºèÊéßÂà∂Âô®
            const dualMode = new DualModeController();
            
            // ÂàõÂª∫ÂÜÖÂÆπÂàÜÊûêÂô®
            const analyzer = new ContentAnalyzer();
            
            // ÁõëÂê¨Ê®°ÂºèÂàáÊç¢
            dualMode.on('onModeChange', (mode) => {
                console.log('Ê®°ÂºèÂàáÊç¢:', mode);
                
                // ÊòæÁ§∫Ê®°ÂºèÂàáÊç¢Ê∂àÊÅØ
                const message = mode === 'simple' ? 'Â∑≤ÂàáÊç¢Âà∞ÁÆÄÂçïÊ®°Âºè' : 'Â∑≤ÂàáÊç¢Âà∞È´òÁ∫ßÊ®°Âºè';
                showMessage(message, 'info');
            });
            
            // ÁõëÂê¨ËΩ¨Êç¢‰∫ã‰ª∂
            dualMode.on('onConvert', async (data) => {
                console.log('ÂºÄÂßãËΩ¨Êç¢:', data);
                
                try {
                    // ÂàÜÊûêÂÜÖÂÆπ
                    const analysis = await analyzer.analyze(data.content);
                    console.log('ÂÜÖÂÆπÂàÜÊûêÁªìÊûú:', analysis);
                    
                    // Ê®°ÊãüËΩ¨Êç¢ËøáÁ®ã
                    await simulateConversion(data, analysis);
                    
                } catch (error) {
                    console.error('ËΩ¨Êç¢Â§±Ë¥•:', error);
                    showMessage('ËΩ¨Êç¢Â§±Ë¥•ÔºåËØ∑ÈáçËØï', 'error');
                }
            });
            
            // Ê®°ÊãüËΩ¨Êç¢ËøáÁ®ã
            async function simulateConversion(data, analysis) {
                const format = analysis.recommendation.format;
                const formatName = getFormatDisplayName(format);
                
                // ÊòæÁ§∫ÂºÄÂßãÊ∂àÊÅØ
                showMessage(`ÂºÄÂßãÁîüÊàê${formatName}...`, 'info');
                
                // Ê®°ÊãüËΩ¨Êç¢Êó∂Èó¥
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // ÊòæÁ§∫ÂÆåÊàêÊ∂àÊÅØ
                showMessage(`${formatName}ÁîüÊàêÂÆåÊàêÔºÅ`, 'success');
                
                // Ê®°ÊãüÊñá‰ª∂‰∏ãËΩΩ
                downloadSimulatedFile(format);
            }
            
            // Ê®°ÊãüÊñá‰ª∂‰∏ãËΩΩ
            function downloadSimulatedFile(format) {
                const filename = `AIËΩ¨Êç¢ÊñáÊ°£_${new Date().toISOString().slice(0, 10)}.${format}`;
                console.log('Ê®°Êãü‰∏ãËΩΩÊñá‰ª∂:', filename);
                
                // Âú®ÂÆûÈôÖÂ∫îÁî®‰∏≠ÔºåËøôÈáå‰ºöËß¶ÂèëÁúüÂÆûÁöÑÊñá‰ª∂‰∏ãËΩΩ
                setTimeout(() => {
                    showMessage('Êñá‰ª∂‰∏ãËΩΩÂ∑≤ÂºÄÂßã', 'success');
                }, 500);
            }
            
            // Ëé∑ÂèñÊ†ºÂºèÊòæÁ§∫ÂêçÁß∞
            function getFormatDisplayName(format) {
                const names = {
                    'docx': 'WordÊñáÊ°£',
                    'xlsx': 'ExcelË°®Ê†º',
                    'pdf': 'PDFÊñáÊ°£'
                };
                return names[format] || format.toUpperCase();
            }
            
            // ÊòæÁ§∫Ê∂àÊÅØ
            function showMessage(message, type = 'info') {
                const messageEl = document.createElement('div');
                messageEl.className = `message message-${type}`;
                messageEl.textContent = message;
                
                document.body.appendChild(messageEl);
                
                setTimeout(() => {
                    messageEl.remove();
                }, 3000);
            }
            
            // Ê∑ªÂä†‰∏Ä‰∫õÊµãËØïÊï∞ÊçÆ
            window.testData = {
                conversation: `Áî®Êà∑ÔºöËØ∑Â∏ÆÊàëÂàÜÊûê‰∏Ä‰∏ãËøô‰∏™Êï∞ÊçÆË°®Ê†º
                
| ‰∫ßÂìÅÂêçÁß∞ | ÈîÄÈáè | ‰ª∑Ê†º |
|---------|------|------|
| ‰∫ßÂìÅA   | 100  | 50   |
| ‰∫ßÂìÅB   | 200  | 80   |
| ‰∫ßÂìÅC   | 150  | 60   |

Âä©ÊâãÔºöÂ•ΩÁöÑÔºåÊàëÊù•‰∏∫ÊÇ®ÂàÜÊûêËøô‰∏™ÈîÄÂîÆÊï∞ÊçÆË°®Ê†º...`,
                
                document: `# AIÂÜÖÂÆπÊ†ºÂºèËΩ¨Êç¢Â∑•ÂÖ∑‰ΩøÁî®ÊåáÂçó

## ÁÆÄ‰ªã
ËøôÊòØ‰∏Ä‰∏™Âº∫Â§ßÁöÑAIÂÜÖÂÆπÊ†ºÂºèËΩ¨Êç¢Â∑•ÂÖ∑ÔºåÊîØÊåÅÂ§öÁßçËæìÂá∫Ê†ºÂºè„ÄÇ

## ‰∏ªË¶ÅÂäüËÉΩ
- WordÊñáÊ°£ÁîüÊàê
- ExcelË°®Ê†ºÁîüÊàê  
- PDFÊñáÊ°£ÁîüÊàê

## ‰ΩøÁî®ÊñπÊ≥ï
1. Á≤òË¥¥ÂÜÖÂÆπ
2. ÈÄâÊã©Ê†ºÂºè
3. ÂºÄÂßãËΩ¨Êç¢`,
                
                code: `\`\`\`javascript
function convertContent(content, format) {
    const analyzer = new ContentAnalyzer();
    const result = analyzer.analyze(content);
    return generateFile(result, format);
}
\`\`\``
            };
            
            console.log('ÊµãËØïÊï∞ÊçÆÂ∑≤ÂáÜÂ§áÔºåÂèØÂú®ÊéßÂà∂Âè∞‰ΩøÁî® testData ËÆøÈóÆ');
            console.log('ÂéüÂûãÂàùÂßãÂåñÂÆåÊàêÔºÅ');
        });
    </script>
</body>
</html>
